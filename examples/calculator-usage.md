# 计算器工具使用示例

## 基础使用

### 1. 直接调用工具

```typescript
import { calculatorTool } from '../src/mastra/tools';

// 加法运算
const addResult = await calculatorTool.execute({
  firstNumber: 15,
  secondNumber: 27,
  operation: 'add'
});

console.log(addResult);
// 输出:
// {
//   result: 42,
//   expression: "15 + 27 = 42",
//   operationName: "加法"
// }
```

### 2. 通过智能体使用

启动Mastra应用后，你可以直接与计算器智能体对话：

```
用户：帮我计算100除以5
助手：我来帮你计算100除以5。
[使用calculator工具，firstNumber=100, secondNumber=5, operation=divide]
结果是20。100 ÷ 5 = 20
```

## 支持的运算类型

| 运算类型 | 英文标识 | 示例 | 结果 |
|---------|---------|------|------|
| 加法 | `add` | 15 + 27 | 42 |
| 减法 | `subtract` | 100 - 35 | 65 |
| 乘法 | `multiply` | 12 × 8 | 96 |
| 除法 | `divide` | 100 ÷ 4 | 25 |

## 常见使用场景

### 1. 基础数学计算
```
用户：计算25加18
助手：我来帮你计算25加18。
结果是43。25 + 18 = 43
```

### 2. 购物计算
```
用户：一件衣服原价200元，打8折，帮我计算折扣后的价格
助手：我来帮你计算折扣后的价格。
200 × 0.8 = 160
折扣后的价格是160元。
```

### 3. 时间计算
```
用户：现在是下午2点，再过5小时是几点？
助手：我来帮你计算时间。
14 + 5 = 19
再过5小时是晚上7点。
```

### 4. 面积计算
```
用户：一个长方形的长是12米，宽是8米，面积是多少？
助手：我来帮你计算长方形的面积。
12 × 8 = 96
这个长方形的面积是96平方米。
```

## 错误处理示例

### 除零错误
```
用户：计算10除以0
助手：抱歉，除数不能为零！这是数学上的错误操作。
```

### 无效输入
```
用户：计算abc加def
助手：抱歉，我只能处理数字计算。请提供有效的数字。
```

## 高级用法

### 批量计算
虽然当前版本只支持两个数字的运算，但你可以连续使用：

```
用户：帮我计算(15+27)×3
助手：我来帮你分步计算。
首先计算15+27：
15 + 27 = 42
然后计算42×3：
42 × 3 = 126
最终结果是126。
```

### 百分比计算
```
用户：80的25%是多少？
助手：我来帮你计算百分比。
80 × 0.25 = 20
80的25%是20。
```

## 开发扩展

如果你想扩展计算器功能，可以参考以下模式：

```typescript
// 添加新的运算类型
export const advancedCalculatorTool = createTool({
  id: 'advanced-calculator',
  description: '高级计算器工具',
  inputSchema: z.object({
    number: z.number().describe('数字'),
    operation: z.enum(['square', 'sqrt', 'percentage']).describe('高级运算类型')
  }),
  // ... 其他配置
});
```

## 注意事项

1. **数据类型**: 所有输入必须是数字类型
2. **除零保护**: 工具会自动检测并阻止除零操作
3. **精度**: 计算结果保持JavaScript的数值精度
4. **错误处理**: 工具会提供清晰的错误信息

## 技术支持

如果在使用过程中遇到问题，请检查：
1. 输入参数是否正确
2. 运算类型是否支持
3. 项目依赖是否完整安装
4. Mastra应用是否正常启动

